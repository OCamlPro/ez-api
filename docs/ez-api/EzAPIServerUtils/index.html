<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>EzAPIServerUtils (ez-api.EzAPIServerUtils)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">ez-api</a> &#x00BB; EzAPIServerUtils</nav><h1>Module <code>EzAPIServerUtils</code></h1></header><dl><dt class="spec type" id="type-directory"><a href="#type-directory" class="anchor"></a><code><span class="keyword">type</span> <span>'a directory</span></code><code> = </code><code>{</code><table class="record"><tr id="type-directory.meth_GET" class="anchored"><td class="def field"><a href="#type-directory.meth_GET" class="anchor"></a><code>meth_GET : <span><span class="type-var">'a</span> <a href="../RestoDirectory1/index.html#type-directory">RestoDirectory1.directory</a></span>;</code></td></tr><tr id="type-directory.meth_OPTIONS" class="anchored"><td class="def field"><a href="#type-directory.meth_OPTIONS" class="anchor"></a><code>meth_OPTIONS : <span><span class="type-var">'a</span> <a href="../RestoDirectory1/index.html#type-directory">RestoDirectory1.directory</a></span>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-answer"><a href="#type-answer" class="anchor"></a><code><span class="keyword">type</span> <span>'output answer</span></code><code> = <span><span class="type-var">'output</span> <a href="../RestoDirectory1/Answer/index.html#type-answer">RestoDirectory1.Answer.answer</a></span></code></dt></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <span><span class="type-var">'a</span> <a href="index.html#type-directory">directory</a></span></code></dt></dl><div class="spec module" id="module-StringSet"><a href="#module-StringSet" class="anchor"></a><code><span class="keyword">module</span> <a href="StringSet/index.html">StringSet</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-return"><a href="#val-return" class="anchor"></a><code><span class="keyword">val</span> return : <span>?&#8288;code:int</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="../RestoDirectory1/Answer/index.html#type-answer">RestoDirectory1.Answer.answer</a></span> Lwt.t</span></code></dt><dt class="spec value" id="val-return_raw"><a href="#val-return_raw" class="anchor"></a><code><span class="keyword">val</span> return_raw : <span>?&#8288;code:int</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="../RestoDirectory1/Answer/index.html#type-answer">RestoDirectory1.Answer.answer</a></span> Lwt.t</span></code></dt><dt class="spec value" id="val-verbose"><a href="#val-verbose" class="anchor"></a><code><span class="keyword">val</span> verbose : int</code></dt></dl><dl><dt class="spec exception" id="exception-EzRawReturn"><a href="#exception-EzRawReturn" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">EzRawReturn</span> <span class="keyword">of</span> string</code></dt><dt class="spec exception" id="exception-EzRawError"><a href="#exception-EzRawError" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">EzRawError</span> <span class="keyword">of</span> int</code></dt><dt class="spec exception" id="exception-EzContentError"><a href="#exception-EzContentError" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">EzContentError</span> <span class="keyword">of</span> int * string</code></dt></dl><dl><dt class="spec value" id="val-list_trim"><a href="#val-list_trim" class="anchor"></a><code><span class="keyword">val</span> list_trim : <span>string list</span> <span>&#45;&gt;</span> <span>string list</span></code></dt><dt class="spec value" id="val-t0"><a href="#val-t0" class="anchor"></a><code><span class="keyword">val</span> t0 : float</code></dt><dt class="spec value" id="val-req_time"><a href="#val-req_time" class="anchor"></a><code><span class="keyword">val</span> req_time : <span>float Stdlib.ref</span></code></dt><dt class="spec value" id="val-set_req_time"><a href="#val-set_req_time" class="anchor"></a><code><span class="keyword">val</span> set_req_time : unit <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-req_time"><a href="#val-req_time" class="anchor"></a><code><span class="keyword">val</span> req_time : unit <span>&#45;&gt;</span> float</code></dt></dl><dl><dt class="spec type" id="type-timings"><a href="#type-timings" class="anchor"></a><code><span class="keyword">type</span> timings</code><code> = </code><code>{</code><table class="record"><tr id="type-timings.timings_ok" class="anchored"><td class="def field"><a href="#type-timings.timings_ok" class="anchor"></a><code><span class="keyword">mutable</span> timings_ok : <span><a href="../Timings/index.html#type-t">Timings.t</a> array</span>;</code></td></tr><tr id="type-timings.timings_fail" class="anchored"><td class="def field"><a href="#type-timings.timings_fail" class="anchor"></a><code><span class="keyword">mutable</span> timings_fail : <span><a href="../Timings/index.html#type-t">Timings.t</a> array</span>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-timings"><a href="#val-timings" class="anchor"></a><code><span class="keyword">val</span> timings : <a href="index.html#type-timings">timings</a></code></dt><dt class="spec value" id="val-add_timing"><a href="#val-add_timing" class="anchor"></a><code><span class="keyword">val</span> add_timing : int <span>&#45;&gt;</span> bool <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-init_timings"><a href="#val-init_timings" class="anchor"></a><code><span class="keyword">val</span> init_timings : int <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-req_ips"><a href="#val-req_ips" class="anchor"></a><code><span class="keyword">val</span> req_ips : <span><span>(string, <a href="../EzAPI/TYPES/index.html#type-ip_info">EzAPI.TYPES.ip_info</a>)</span> Stdlib.Hashtbl.t</span></code></dt><dt class="spec value" id="val-register_ip"><a href="#val-register_ip" class="anchor"></a><code><span class="keyword">val</span> register_ip : string <span>&#45;&gt;</span> unit</code></dt></dl><dl><dt class="spec exception" id="exception-EzReturnOPTIONS"><a href="#exception-EzReturnOPTIONS" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">EzReturnOPTIONS</span> <span class="keyword">of</span> <span><span>(string * string)</span> list</span></code></dt></dl><dl><dt class="spec value" id="val-options_headers_of_security"><a href="#val-options_headers_of_security" class="anchor"></a><code><span class="keyword">val</span> options_headers_of_security : <span><span>[&lt; <span>`Basic of <a href="../EzAPI/index.html#type-basic_security_desc">EzAPI.basic_security_desc</a> &amp; <span class="type-var">'a</span></span> <span><span>| `Bearer</span> of <a href="../EzAPI/index.html#type-bearer_security_desc">EzAPI.bearer_security_desc</a> &amp; <span class="type-var">'b</span></span> <span><span>| `Cookie</span> of <span>string <a href="../EzAPI/index.html#type-apikey_security">EzAPI.apikey_security</a></span> &amp; <span class="type-var">'c</span></span> <span><span>| `Header</span> of <span>string <a href="../EzAPI/index.html#type-apikey_security">EzAPI.apikey_security</a></span></span> <span><span>| `Nosecurity</span> of <a href="../EzAPI/index.html#type-uninhabited">EzAPI.uninhabited</a> &amp; <span class="type-var">'d</span></span> <span><span>| `Query</span> of <span><a href="../EzAPI/index.html#type-param">EzAPI.param</a> <a href="../EzAPI/index.html#type-apikey_security">EzAPI.apikey_security</a></span> &amp; <span class="type-var">'e</span></span> ]</span> list</span> <span>&#45;&gt;</span> <span><span>(string * string)</span> list</span></code></dt><dt class="spec value" id="val-register"><a href="#val-register" class="anchor"></a><code><span class="keyword">val</span> register : <span>?&#8288;options_headers:<span><span>(string * string)</span> list</span></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>, <span class="type-var">'d</span>, <span class="type-var">'e</span>, <span>[&lt; <span>`Basic of <a href="../EzAPI/index.html#type-basic_security_desc">EzAPI.basic_security_desc</a> &amp; <span class="type-var">'g</span></span> <span><span>| `Bearer</span> of <a href="../EzAPI/index.html#type-bearer_security_desc">EzAPI.bearer_security_desc</a> &amp; <span class="type-var">'h</span></span> <span><span>| `Cookie</span> of <span>string <a href="../EzAPI/index.html#type-apikey_security">EzAPI.apikey_security</a></span> &amp; <span class="type-var">'i</span></span> <span><span>| `Header</span> of <span>string <a href="../EzAPI/index.html#type-apikey_security">EzAPI.apikey_security</a></span></span> <span><span>| `Nosecurity</span> of <a href="../EzAPI/index.html#type-uninhabited">EzAPI.uninhabited</a> &amp; <span class="type-var">'j</span></span> <span><span>| `Query</span> of <span><a href="../EzAPI/index.html#type-param">EzAPI.param</a> <a href="../EzAPI/index.html#type-apikey_security">EzAPI.apikey_security</a></span> &amp; <span class="type-var">'k</span></span> ]</span> <span class="keyword">as</span> 'f)</span> <a href="../EzAPI/index.html#type-service">EzAPI.service</a></span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> list</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span><span><span><span>(<span class="type-var">'d</span>, <span class="type-var">'e</span>)</span> Result.result</span> <a href="../RestoDirectory1/Answer/index.html#type-answer">RestoDirectory1.Answer.answer</a></span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><a href="../EzAPI/index.html#type-request">EzAPI.request</a> <a href="index.html#type-directory">directory</a></span> <span>&#45;&gt;</span> <span><a href="../EzAPI/index.html#type-request">EzAPI.request</a> <a href="index.html#type-directory">directory</a></span></code></dt><dt class="spec value" id="val-json_root"><a href="#val-json_root" class="anchor"></a><code><span class="keyword">val</span> json_root : <span>[&gt; <span>`A of <span><span class="type-var">'a</span> list</span></span> <span>| `Null</span> <span><span>| `O</span> of <span><span class="type-var">'b</span> list</span></span> ]</span> <span class="keyword">as</span> 'a <span>&#45;&gt;</span> <span>[&gt; <span>`A of <span><span class="type-var">'a</span> list</span></span> <span><span>| `O</span> of <span><span class="type-var">'b</span> list</span></span> ]</span></code></dt></dl><dl><dt class="spec type" id="type-reply"><a href="#type-reply" class="anchor"></a><code><span class="keyword">type</span> reply</code><code> = </code><table class="variant"><tr id="type-reply.ReplyNone" class="anchored"><td class="def constructor"><a href="#type-reply.ReplyNone" class="anchor"></a><code>| </code><code><span class="constructor">ReplyNone</span></code></td></tr><tr id="type-reply.ReplyJson" class="anchored"><td class="def constructor"><a href="#type-reply.ReplyJson" class="anchor"></a><code>| </code><code><span class="constructor">ReplyJson</span> <span class="keyword">of</span> Json_repr.Ezjsonm.value</code></td></tr><tr id="type-reply.ReplyString" class="anchored"><td class="def constructor"><a href="#type-reply.ReplyString" class="anchor"></a><code>| </code><code><span class="constructor">ReplyString</span> <span class="keyword">of</span> string * string</code></td></tr></table></dt><dt class="spec type" id="type-server_kind"><a href="#type-server_kind" class="anchor"></a><code><span class="keyword">type</span> server_kind</code><code> = </code><table class="variant"><tr id="type-server_kind.API" class="anchored"><td class="def constructor"><a href="#type-server_kind.API" class="anchor"></a><code>| </code><code><span class="constructor">API</span> <span class="keyword">of</span> <span><a href="../EzAPI/index.html#type-request">EzAPI.request</a> <a href="index.html#type-directory">directory</a></span></code></td></tr><tr id="type-server_kind.Root" class="anchored"><td class="def constructor"><a href="#type-server_kind.Root" class="anchor"></a><code>| </code><code><span class="constructor">Root</span> <span class="keyword">of</span> string * <span>string option</span></code></td></tr></table></dt><dt class="spec type" id="type-server"><a href="#type-server" class="anchor"></a><code><span class="keyword">type</span> server</code><code> = </code><code>{</code><table class="record"><tr id="type-server.server_port" class="anchored"><td class="def field"><a href="#type-server.server_port" class="anchor"></a><code>server_port : int;</code></td></tr><tr id="type-server.server_kind" class="anchored"><td class="def field"><a href="#type-server.server_kind" class="anchor"></a><code>server_kind : <a href="index.html#type-server_kind">server_kind</a>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-reply_none"><a href="#val-reply_none" class="anchor"></a><code><span class="keyword">val</span> reply_none : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <a href="index.html#type-reply">reply</a>)</span> Lwt.t</span></code></dt><dt class="spec value" id="val-reply_json"><a href="#val-reply_json" class="anchor"></a><code><span class="keyword">val</span> reply_json : <span class="type-var">'a</span> <span>&#45;&gt;</span> Json_repr.Ezjsonm.value <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <a href="index.html#type-reply">reply</a>)</span> Lwt.t</span></code></dt><dt class="spec value" id="val-reply_raw_json"><a href="#val-reply_raw_json" class="anchor"></a><code><span class="keyword">val</span> reply_raw_json : <span class="type-var">'a</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <a href="index.html#type-reply">reply</a>)</span> Lwt.t</span></code></dt><dt class="spec value" id="val-reply_timeout"><a href="#val-reply_timeout" class="anchor"></a><code><span class="keyword">val</span> reply_timeout : unit <span>&#45;&gt;</span> <span>int Lwt.t</span> * <a href="index.html#type-reply">reply</a></code></dt><dt class="spec value" id="val-reply_answer"><a href="#val-reply_answer" class="anchor"></a><code><span class="keyword">val</span> reply_answer : <span>Json_repr.Ezjsonm.value <a href="../RestoDirectory1/Answer/index.html#type-answer">RestoDirectory1.Answer.answer</a></span> <span>&#45;&gt;</span> <span><span>(int * <a href="index.html#type-reply">reply</a>)</span> Lwt.t</span></code></dt><dt class="spec value" id="val-rev_extensions"><a href="#val-rev_extensions" class="anchor"></a><code><span class="keyword">val</span> rev_extensions : string <span>&#45;&gt;</span> <span>string list</span></code></dt><dt class="spec value" id="val-normalize_path"><a href="#val-normalize_path" class="anchor"></a><code><span class="keyword">val</span> normalize_path : <span>string list</span> <span>&#45;&gt;</span> <span>string list</span></code></dt><dt class="spec value" id="val-content_type_of_file"><a href="#val-content_type_of_file" class="anchor"></a><code><span class="keyword">val</span> content_type_of_file : string <span>&#45;&gt;</span> string</code></dt></dl><div class="spec module" id="module-FileString"><a href="#module-FileString" class="anchor"></a><code><span class="keyword">module</span> <a href="FileString/index.html">FileString</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-reply_file"><a href="#val-reply_file" class="anchor"></a><code><span class="keyword">val</span> reply_file : <span>?&#8288;meth:<a href="../Resto1/index.html#type-method_type">Resto1.method_type</a></span> <span>&#45;&gt;</span> <span>?&#8288;default:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>string list</span> <span>&#45;&gt;</span> <span><span>(int * <a href="index.html#type-reply">reply</a>)</span> Lwt.t</span></code></dt><dt class="spec value" id="val-return_error"><a href="#val-return_error" class="anchor"></a><code><span class="keyword">val</span> return_error : <span>?&#8288;content:string</span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt></dl><div class="spec module" id="module-Legacy"><a href="#module-Legacy" class="anchor"></a><code><span class="keyword">module</span> <a href="Legacy/index.html">Legacy</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></body></html>